{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/10/mongodb-basics/","result":{"data":{"site":{"siteMetadata":{"title":"dominikaschbacher.com"}},"markdownRemark":{"id":"42254000-254c-5ffc-a72b-d2964bf914c5","excerpt":"MongoDB is one of the leading NoSQL databases and is often used when dealing\nwith new technologies like NodeJS, React or Angular. To understand the basics\nof…","html":"<p>MongoDB is one of the leading NoSQL databases and is often used when dealing\nwith new technologies like NodeJS, React or Angular. To understand the basics\nof MongoDB I created this post that shows a few queries to help you understand\nthe structure and functionality of the database.</p>\n<p>In MongoDB we have so called collections which can be interpreted as tables, where\nyou can store documents. A document is basically like a row in an SQL database that\ncan have as many fields as you want. A field is a key – value pair stored in a document.</p>\n<p><strong>Show and use databases:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># show all databases</span>\nshow dbs\n\n<span class=\"token comment\"># use a database</span>\nuse <span class=\"token operator\">&lt;</span>db_name<span class=\"token operator\">></span>\n\n<span class=\"token comment\"># show the current database name</span>\ndb</code></pre></div>\n<p>These documents can also have different amounts of fields, like in the following example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.customers.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        first_name:<span class=\"token string\">\"Bryan\"</span>,\n        last_name:<span class=\"token string\">\"Cranston\"</span>\n    <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>\n        first_name:<span class=\"token string\">\"Aaron\"</span>,\n        last_name:<span class=\"token string\">\"Paul\"</span>,\n        gender:<span class=\"token string\">\"male\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Update documents in collection:</strong></p>\n<p>Documents can be updated with all fields at once, but single fields can also change their value.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update whole document</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Bryan\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span>\n    first_name:<span class=\"token string\">\"Bryan\"</span>,\n    last_name:<span class=\"token string\">\"Cranston\"</span>,\n    gender:<span class=\"token string\">\"male\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># change one field</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span><span class=\"token variable\">$set</span>:<span class=\"token punctuation\">{</span>gender:<span class=\"token string\">\"male\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span><span class=\"token variable\">$set</span>:<span class=\"token punctuation\">{</span>age:39<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># increment field</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span><span class=\"token variable\">$inc</span>:<span class=\"token punctuation\">{</span>age:5<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># remove field</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span><span class=\"token variable\">$unset</span>:<span class=\"token punctuation\">{</span>age:1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># insert when updating non existing documents</span>\ndb.customers.update<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Anna\"</span><span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Anna\"</span>, last_name:<span class=\"token string\">\"Gunn\"</span><span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>upsert: true<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># change key</span>\ndb.customers.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span><span class=\"token variable\">$rename</span>:<span class=\"token punctuation\">{</span><span class=\"token string\">\"gender\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Remove document:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove all with name Aaron</span>\ndb.customers.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># remove first one named Aaron</span>\ndb.customers.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Aaron\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span>justOne:true<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Find documents:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># show all documents in collection</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># where first name is Anna</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Anna\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># where first name is Anna or Jon</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token variable\">$or</span>:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Anna\"</span><span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span>first_name:<span class=\"token string\">\"Jon\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># greater than / less than (gt/lt/gte/lte)</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>age:<span class=\"token punctuation\">{</span><span class=\"token variable\">$lt</span>:40<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># find by interleaved fields</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"address.city\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"Los Angeles\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Sorting, count and foreach:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># sorting</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>last_name: <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\"># ascending order</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>last_name: -1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\"># descending order</span>\n\n<span class=\"token comment\"># count</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>last_name: -1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>.count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># limit to 5 results</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>last_name: -1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># print all customer names</span>\ndb.customers.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.forEach<span class=\"token punctuation\">(</span>function<span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    print<span class=\"token punctuation\">(</span><span class=\"token string\">\"Customer name: \"</span>+doc.first_name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Thanks for the <a href=\"https://youtu.be/pWbMrx5rVBE\">great video</a> on MongoDB to Brad Traversy.\nThe video provides you with the same content listed above.</p>","frontmatter":{"title":"MongoDB basics","date":"October 28, 2018","description":null,"author":"aschbacd"}},"previous":{"fields":{"slug":"/2018/08/cisco-ios-commands/"},"frontmatter":{"title":"Time saving Cisco IOS commands"}},"next":{"fields":{"slug":"/2019/01/npm-basics/"},"frontmatter":{"title":"NPM basics"}}},"pageContext":{"id":"42254000-254c-5ffc-a72b-d2964bf914c5","previousPostId":"9def54b7-3f8d-5c52-8430-48d5b3178c01","nextPostId":"e622e17d-6dc2-56bb-b65a-0e51fda7bad1"}},"staticQueryHashes":["2841359383"]}