{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/03/nginx-locations/","result":{"data":{"site":{"siteMetadata":{"title":"dominikaschbacher.com"}},"markdownRemark":{"id":"442c3297-8139-5c11-aee5-529e81a56c27","excerpt":"What is an Nginx location? Example web uri: https://domain/page2 On the web server there could simply be a folder inside the root directory called page2 to make…","html":"<p><strong>What is an Nginx location?</strong></p>\n<p>Example web uri: <a href=\"https://domain/page2\">https://domain/page2</a></p>\n<p>On the web server there could simply be a folder inside the root directory called page2 to make this link available.\nThere is also another possibility to create such links by using locations.\nWhen using locations the content folder can be anywhere as long it can be accessed by the www-data user and appropriate permissions.</p>\n<p><strong>Add a location:</strong></p>\n<p>To add locations you have to edit the site configuration file.\nIn my case I just have the default site enabled, because I can only access my server by one domain so I have to edit it like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># edit default site configuration</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/nginx/sites-enabled/default</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\"># add location (domain/blog)</span>\n<span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>blog <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">root</span> <span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>pages<span class=\"token operator\">/</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span><span class=\"token operator\">/</span> <span class=\"token operator\">/</span>blog<span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>php<span class=\"token operator\">?</span>args<span class=\"token punctuation\">;</span> <span class=\"token comment\"># wordpress routes</span>\n\n    <span class=\"token comment\"># include php</span>\n    <span class=\"token keyword\">location</span> <span class=\"token operator\">~</span> \\<span class=\"token punctuation\">.</span>php$ <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">include</span> snippets<span class=\"token operator\">/</span>fastcgi<span class=\"token operator\">-</span>php<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">fastcgi_param</span> SCRIPT_FILENAME <span class=\"token variable\">$request_filename</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">fastcgi_pass</span> unix<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>run<span class=\"token operator\">/</span>php<span class=\"token operator\">/</span>php7<span class=\"token punctuation\">.</span><span class=\"token number\">0</span><span class=\"token operator\">-</span>fpm<span class=\"token punctuation\">.</span>sock<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Difference between root and alias:</strong></p>\n<p>When using root, the folder name has to be the same as the location name, because you just provide the path to the parent folder, not the full location.</p>\n<p><strong>configuration path:</strong> /var/www/pages/<br>\n<strong>points at:</strong> /var/www/pages/blog<br>\n<strong>used by:</strong> domain/blog</p>\n<p>When using alias, you have to enter the full location path but therefore it doesn’t have to be named like the location name.</p>\n<p><strong>configuration path:</strong> /var/www/pages/test<br>\n<strong>used by:</strong> domain/blog</p>","frontmatter":{"title":"Add locations in Nginx","date":"March 07, 2018","description":null,"author":"aschbacd"}},"previous":{"fields":{"slug":"/2018/03/first-post/"},"frontmatter":{"title":"First post"}},"next":{"fields":{"slug":"/2018/08/cisco-ios-commands/"},"frontmatter":{"title":"Time saving Cisco IOS commands"}}},"pageContext":{"id":"442c3297-8139-5c11-aee5-529e81a56c27","previousPostId":"45de2529-1c53-55bc-a7a6-ff9a4e59f5c5","nextPostId":"9def54b7-3f8d-5c52-8430-48d5b3178c01"}},"staticQueryHashes":["2841359383"]}